<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>English-Hebrew Quiz with RPS Challenge</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      margin: 0;
      background: #f0f0f0;
    }
    #quiz-container, #rps-container {
      background: #fff;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      text-align: center;
      width: 300px;
      margin-bottom: 20px;
    }
    #word {
      font-size: 24px;
      margin-bottom: 15px;
      cursor: pointer;
    }
    .option, .rps-option {
      display: block;
      margin: 10px auto;
      padding: 10px;
      background: #e0e0e0;
      border: none;
      border-radius: 4px;
      width: 100%;
      font-size: 18px;
      cursor: pointer;
      text-align: center;
    }
    .option:hover, .rps-option:hover {
      background: #d5d5d5;
    }
    #score {
      margin-top: 10px;
      font-size: 18px;
    }
    #rps-options {
      display: flex;
      justify-content: space-around;
      margin-bottom: 10px;
    }
    canvas {
      width: 64px;
      height: 64px;
      cursor: pointer;
    }
    #rps-result {
      font-size: 20px;
      font-weight: bold;
      margin-top: 10px;
    }
    #rps-continue {
      margin-top: 10px;
      padding: 8px 16px;
      font-size: 16px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div id="quiz-container">
    <div id="word" title="Click to replay pronunciation"></div>
    <div id="options"></div>
    <div id="score">Score: 0</div>
  </div>  <div id="rps-container" style="display:none;">
    <h2>Rock Paper Scissors Challenge!</h2>
    <div id="rps-options"></div>
    <div id="rps-result"></div>
    <button id="rps-continue" style="display:none;">Continue Quiz</button>
  </div>  <script>
    // --- Setup ---
    const dictionary = [
      { en: 'apple', he: 'תפוח' },
      { en: 'book', he: 'ספר' },
      { en: 'house', he: 'בית' },
      { en: 'car', he: 'מכונית' },
      { en: 'water', he: 'מים' },
      { en: 'sun', he: 'שמש' },
      { en: 'tree', he: 'עץ' },
      { en: 'food', he: 'אוכל' }
    ];
    let score = 0;
    let current;

    // Load sprite-sheet (only for RPS)
    const sheetImg = new Image();
    // Point to your single sprite-sheet at project root
    sheetImg.src = 'file_00000000d81c61f79688983c0590d134.png';
    let sheetW, sheetH, cellW, cellH;
    sheetImg.onload = () => {
      sheetW = sheetImg.naturalWidth;
      sheetH = sheetImg.naturalHeight;
      cellW = sheetW / 3;
      cellH = sheetH / 4;
    };

    // Elements
    const wordEl = document.getElementById('word');
    const optionsEl = document.getElementById('options');
    const scoreEl = document.getElementById('score');
    const quizContainer = document.getElementById('quiz-container');
    const rpsContainer = document.getElementById('rps-container');
    const rpsOptions = document.getElementById('rps-options');
    const rpsResult = document.getElementById('rps-result');
    const rpsContinueBtn = document.getElementById('rps-continue');

    // Random utilities
    function randInt(n) { return Math.floor(Math.random() * n); }
    function shuffle(arr) {
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
    }

    // --- Quiz Logic ---
    function nextQuestion() {
      quizContainer.style.display = 'block';
      current = dictionary[randInt(dictionary.length)];
      wordEl.textContent = current.en;
      speak(current.en);

      const choices = [current.he];
      const others = dictionary.filter(w => w.he !== current.he);
      shuffle(others);
      choices.push(...others.slice(0, 3));
      shuffle(choices);

      optionsEl.innerHTML = '';
      choices.forEach(choice => {
        const btn = document.createElement('button');
        btn.textContent = choice.he;
        btn.className = 'option';
        btn.onclick = () => handleAnswer(choice);
        optionsEl.appendChild(btn);
      });
    }

    function handleAnswer(choice) {
      if (choice === current.he) {
        score++;
        alert('נכון! (Correct!)');
      } else {
        alert(`לא נכון. (Incorrect.)\nהתרגום הנכון של "${current.en}" הוא "${current.he}".`);
      }
      scoreEl.textContent = `Score: ${score}`;

      if (score > 0 && score % 10 === 0) {
        startRPSChallenge();
      } else {
        nextQuestion();
      }
    }

    function speak(text) {
      if (!('speechSynthesis' in window)) return;
      const utt = new SpeechSynthesisUtterance(text);
      utt.lang = 'en-US';
      speechSynthesis.speak(utt);
    }
    wordEl.addEventListener('click', () => speak(current.en));

    // --- RPS Logic ---
    function startRPSChallenge() {
      quizContainer.style.display = 'none';
      rpsContainer.style.display = 'block';
      rpsOptions.innerHTML = '';
      rpsResult.textContent = '';
      rpsContinueBtn.style.display = 'none';

      ['rock','paper','scissors'].forEach((weapon, col) => {
        const cv = createSpriteCanvas(0, col);
        cv.classList.add('rps-option');
        cv.dataset.weapon = weapon;
        cv.onclick = () => handleRPSChoice(weapon);
        rpsOptions.appendChild(cv);
      });
    }

    function createSpriteCanvas(row, col) {
      const cv = document.createElement('canvas');
      cv.width = 64;
      cv.height = 64;
      const ctx = cv.getContext('2d');
      if (cellW && cellH) {
        ctx.drawImage(
          sheetImg,
          col * cellW, row * cellH, cellW, cellH,
          0, 0, cv.width, cv.height
        );
      }
      return cv;
    }

    function handleRPSChoice(userWeapon) {
      const userCol = ['rock','paper','scissors'].indexOf(userWeapon);
      const compRow = randInt(3) + 1;
      const compCol = randInt(3);
      const compWeapon = ['rock','paper','scissors'][compCol];

      let resultText;
      if (userCol === compCol) {
        resultText = "It's a tie!";
      } else if (
        (userWeapon === 'rock'     && compWeapon === 'scissors') ||
        (userWeapon === 'paper'    && compWeapon === 'rock')     ||
        (userWeapon === 'scissors' && compWeapon === 'paper')
      ) {
        resultText = 'You won!';
      } else {
        resultText = 'You lost!';
      }

      rpsOptions.innerHTML = '';
      const userDiv = document.createElement('div');
      userDiv.innerHTML = '<h3>Your choice:</h3>';
      userDiv.appendChild(createSpriteCanvas(0, userCol));

      const compDiv = document.createElement('div');
      compDiv.innerHTML = '<h3>Computer\'s choice:</h3>';
      compDiv.appendChild(createSpriteCanvas(compRow, compCol));

      rpsOptions.appendChild(userDiv);
      rpsOptions.appendChild(compDiv);
      rpsResult.textContent = resultText;
      rpsContinueBtn.style.display = 'block';
    }

    rpsContinueBtn.addEventListener('click', () => {
      rpsContainer.style.display = 'none';
      nextQuestion();
    });

    // Start the quiz immediately
    nextQuestion();
  </script></body>
</html>
